#include <stdlib.h>
#include <stdio.h>
void call_slow1(void){
	int i;
	int a = 0;
	for (i=0;i < (1<<30); i++) a = (a + 3) % 4;
}

void call_slow2(void){
	int * a = NULL;
	int * b = NULL;
	int * zero = malloc(sizeof(int));
	*zero = 1;
	int i;
	for (i=0; i< (1<<27); i++) {
		if(i%2 == 0){
			a = malloc(sizeof(int) * ((rand() % 1<<8)+1));
			if(i == 0){
				*a = (*zero + i) % (1<<15);
				free(zero);
			} else {
				*a = (*b + i) % (1<<15);
				free(b);
			}
		} else {
			b = malloc(sizeof(int) * ((rand() % 1<<8)+1));
			*b = (*a + i) % (1<<15);
			free(a);
		}
	}
	printf("%d\n",*b);
	free(b);
}

void call_fast1(void){
	printf("hi 1\n");	
}
void call_fast2(void){
	printf("hi 2\n");	
}
void call_fast3(void){
	printf("hi 3\n");	
}

int main(){
	call_slow1();
	call_fast1();
	call_slow2();
	call_fast2();
	call_fast3();
}
