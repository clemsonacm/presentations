# Exploitable 3
### Reverse Engineering


## Brought to you by Clemson ACM and CUCyber

We're on [Steam](http://steamcommunity.com/groups/clemsonacm) &
Freenode! Join #clemsonacm on chat.freenode.net!

### Speakers:

Robert Underwood - ACM Vice President

Mackenzie Binns - CUCyber President



## Overview

1. Why reverse engineering?
2. A word on ethics...
3. What types of tools exist?
	1. Binary analysis (`objdump`)
	2. Userspace tracing tools (`strace`, `ltrace`)
	3. Ptrace based debuggers (`gdb`, `lldb`)
	4. Kernel tracing tools (`dtrace`, `stap`)
	5. Kernel hacking



## Why Reverse Engineering?

1.	Determine behavior of untrusted software
2.	Understand performance characteristics
3.	Change existing behavior
4.	Understanding the system


## A Word on Ethics...

>	With great power comes great responsibility

+	Reverse engineering can:
	+	facilitate exploit development
	+	help bypass program builtin protections
	+	violate license agreements for proprietary software.
	+	be illegal some software!



## Binary Analysis


### What is Binary Analysis?

+	What is a computer program?
+	The life of an executable...
+	Anatomy of an executable...
+	Binary analysis is examining the program on disk


### Objdump Demo


### Objdump

+	`-d` disassemble
+	`-s` full dump
+	`-t` dump symbols and `strip`
+	`-r` and `-R` print relocations



## Userspace Tracing


### What is Userspace Tracing?

+	Now we have a running program...
+	What libraries does it call?
+	What system calls does it make?
+	What files does it open?
+	What signals does it send?


### Strace and Ltrace Demos


### Strace and Ltrace

+	`-T` timing on calls made
+	Both support filtering
+	`strace` and `ltrace` both use `ptrace`
	+	they are very slow



## Ptrace Debugging


### What is Ptrace?

+	What if we could stop and manipulate processes?
+	short for "process trace"
+	What is the value of a variable?
+	Where did the program segfault?
+	What value caused the segfault?


### LLDB demo


### What are Coredumps?

+	Captures state of the program at crashtime
+	Can be triggered by `kill`
+	configured via `ulimit` command


### LLDB Coredump demo


### Other Scenarios

+	What if you want to debug a daemon?
+	What if you want to run the same commands alot?
+	What if you want to set a value?


### LLDB demo



## Kernel Tracing


### What is Kernel Tracing?

+	So far we have been in userspace...
+	We are about to enter a brave new world.
+	Inspect (and modify) the state of the live kernel


### Why Kernel Tracing?

+	What if we need raw device metrics?
+	What if we can't wait for ptrace?
+	What if we can't recompile
+	Very hard to stop


### SystemTap demo


### SystemTap Overview

+	inspired by dtrace
+	available for most Linux systems
+	runtime overview...


### Dtrace

+	considered the gold standard in tracing
+	part of Solaris, FreeBSD, and SmartOS
+	no special kernel modules
+	very similar to systemtap but faster, safer, and more intuitive
	+	no state manipulation
	+	no arbitrary inspection
	+	limited looping



## Kernel Hacking

> edit, compile... profit?


### Why kernel hacking?

+	Somethings you still can't see
+	You want to the kernel to lie
+	Truly arbitrary state inspection.
+	Very hard to stop it


### How to get started?

+	Read the source code
	+	Linux has very little documentation
	+	Most of the documentation is VERY old.
	+	Entire sections get rewritten frequently
+	Look for examples in the kernel
	+	ctags, cscope, ag are your friends



## Further Resources

+	Read the "fantastic" manuals
	+	lldb has help via the `help` command
+	[dtrace oneliners][dtrace]
+	[RedHat guide to stap][systemtap]

[dtrace]: http://wiki.freebsd.org/Dtrace/One-Liners
[systemtap]: https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/SystemTap_Beginners_Guide/index.html


## Questions

Send us feedback at `acm@cs.clemson.edu`!

This material available under [CC By-SA 4.0](http://creativecommons.org/licenses/by-sa/4.0/)
