#!/usr/bin/env python
# -*- coding: utf-8 -*-

def print_backtrace(current_frame, bp_loc, internal):
    print("===")
    for stack_frame in current_frame.thread:
        print(stack_frame)
    return False

def __lldb_init_module(debugger, internal_dict):
    print("loaded")
    target = debugger.GetSelectedTarget()
    breakpoint = target.BreakpointCreateByName("print_reverse")
    breakpoint.SetScriptCallbackFunction("lldb_print_backtrace.print_backtrace")
    breakpoint.SetCondition("node == 0")
